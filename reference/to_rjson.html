<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Convert R object to and from RJSON specification — to_rjson • svMisc</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/spacelab/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Convert R object to and from RJSON specification — to_rjson" />
<meta property="og:description" content="RJSON is an object specification that is not unlike JSON, but
better adapted to represent R objects (i.e., richer than JSON). It is also
easier to parse and evaluate in both R and JavaScript to render the objects
in both languages. RJSON objects are used by SciViews to exchange data
between R and SciViews GUIs like Komodo/SciViews-K." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">svMisc</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.1.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/svMisc.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/temporary_environment.html">Temporary environment</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/SciViews/svMisc/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Convert R object to and from RJSON specification</h1>
    <small class="dont-index">Source: <a href='https://github.com/SciViews/svMisc/blob/master/R/rjson.R'><code>R/rjson.R</code></a></small>
    <div class="hidden name"><code>to_rjson.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>RJSON is an object specification that is not unlike JSON, but
better adapted to represent <span style="R">R</span> objects (i.e., richer than JSON). It is also
easier to parse and evaluate in both <span style="R">R</span> and JavaScript to render the objects
in both languages. RJSON objects are used by SciViews to exchange data
between <span style="R">R</span> and SciViews GUIs like Komodo/SciViews-K.</p>
    </div>

    <pre class="usage"><span class='fu'>to_rjson</span>(<span class='no'>x</span>, <span class='kw'>attributes</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)

<span class='fu'>eval_rjson</span>(<span class='no'>rjson</span>)

<span class='fu'>list_to_json</span>(<span class='no'>x</span>)

<span class='fu'>toRjson</span>(<span class='no'>x</span>, <span class='kw'>attributes</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)

<span class='fu'>evalRjson</span>(<span class='no'>rjson</span>)

<span class='fu'>listToJson</span>(<span class='no'>x</span>)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>x</th>
      <td><p>Any <span style="R">R</span> object to be converted into RJSON (do not work with objects
containing C pointers, environments, promises or expressions, but should
work with almost all other <span style="R">R</span> objects).</p></td>
    </tr>
    <tr>
      <th>attributes</th>
      <td><p>If <code>FALSE</code> (by default), a simple object is created by
ignoring all attributes. This is usally the suitable option to transfer data
to another language, like JavaScript that do not understand R attributes
anyway. With <code>attributes = TRUE</code>, the complete information about the object
is written, so that the object could be recreated (almost) identical when
evaluated in <span style="R">R</span> (but prefer <code><a href='https://rdrr.io/r/base/save.html'>save()</a></code> and <code><a href='https://rdrr.io/r/base/load.html'>load()</a></code> to tranfer objects between
<span style="R">R</span> sessions!).</p></td>
    </tr>
    <tr>
      <th>rjson</th>
      <td><p>A string containing an object specified in RJSON notation. The
specification is evaluated in <span style="R">R</span>... and it can contain also R code. There is
no protection provided against execution of bad code. So, you must trust the
source!</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>For <code>to_rjson()</code>, a character string vector with the RJSON
specification of the argument.</p>
<p>For <code>eval_rjson()</code>, the corresponding <span style="R">R</span> object in case of a pure RJSON
object specification, or the result of evaluating the code, if it contains <span style="R">R</span>
commands (for instance, a RJSONp -RJSON with padding- item where a RJSON
object is an argument of an <span style="R">R</span> function that is evaluated. In this case, the
result of the evaluation is returned).</p>
<p>For <code>list_to_json()</code>, correct (standard) JSON code is generated if <code>x</code> is a
list of character strings, or lists.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>JSON (JavaScript Object Notation) allows to specify fairly complex
objects that can be rather easily exchanged between languages. The notation
is also human-readable and not too difficult to edit manually (although not
advised, of course). However, JSON has too many limitations to represent <span style="R">R</span>
objects (no <code>NA</code> versus <code>NaN</code>, no infinite numbers, no distinction between
lists and objects with attributes, or S4 objects, etc.). Moreover, JSON is
not very easy to interpret in <span style="R">R</span> and the existing implementations can convert
only specified objects (simple objects, lists, data frames, ...).</p>
<p>RJSON slighly modifies and enhances JSON to make it: (1) more complete to
represent almost any <span style="R">R</span> object (except objects with pointers, environments,
..., of course), and (2) to make it very easy to parse and evaluate in both
<span style="R">R</span> and JavaScript (and probably many other) languages.</p>
<p>With <code>attributes = FALSE</code>, factors and Dates are converted to their usual
character representation before encoding the RJSON object. If
<code>attributes = TRUE</code>, they are left as numbers and their attributes (class,
-and levels for factor-) completely characterize them (i.e., using
<code>eval_rjson()</code> and such objects recreate factors or Dates, respectively).
However, they are probably less easy to handle in JavaScript of other
language where you import the RJSON representation.</p>
<p>Note also that a series of objects are not yet handled correctly. These
include: complex numbers, the different date flavors other that Date,
functions, expressions, environments, pointers. Do not use such items in
objects that you want to convert to RJSON notation.</p>
<p>A last restriction: you cannot have any special characters like linefeed,
tabulation, etc. in names. If you want to make your names most compatible
with JavaScript, note that the dot is not allowed in syntactically valid
names, but the dollar sign is allowed.</p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code><a href='parse_text.html'>parse_text()</a></code></p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'># A complex R object</span>
<span class='no'>obj</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/structure.html'>structure</a></span>(<span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span>(
  <span class='kw'>a</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/double.html'>as.double</a></span>(<span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>1</span>:<span class='fl'>5</span>, <span class='fl'>6</span>)),
  <span class='no'>LETTERS</span>,
  <span class='kw'>c</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='kw'>c1</span> <span class='kw'>=</span> <span class='fl'>4.5</span>, <span class='kw'>c2</span> <span class='kw'>=</span> <span class='fl'>7.8</span>, <span class='kw'>c3</span> <span class='kw'>=</span> <span class='fl'>Inf</span>, <span class='kw'>c4</span> <span class='kw'>=</span> -<span class='fl'>Inf</span>, <span class='fl'>NA</span>, <span class='kw'>c6</span> <span class='kw'>=</span> <span class='fl'>NaN</span>),
  <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>TRUE</span>, <span class='fl'>FALSE</span>, <span class='fl'>NA</span>),
  <span class='kw'>e</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/factor.html'>factor</a></span>(<span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"a"</span>, <span class='st'>"b"</span>, <span class='st'>"a"</span>)),
  <span class='kw'>f</span> <span class='kw'>=</span> <span class='st'>'this is a "string" with quote'</span>,
  <span class='kw'>g</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/matrix.html'>matrix</a></span>(<span class='fu'><a href='https://rdrr.io/r/stats/Normal.html'>rnorm</a></span>(<span class='fl'>4</span>), <span class='kw'>ncol</span> <span class='kw'>=</span> <span class='fl'>2</span>),
  <span class='kw'>`h&amp;$@`</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/data.frame.html'>data.frame</a></span>(<span class='kw'>x</span> <span class='kw'>=</span> <span class='fl'>1</span>:<span class='fl'>3</span>, <span class='kw'>y</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/stats/Normal.html'>rnorm</a></span>(<span class='fl'>3</span>),
    <span class='kw'>fact</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/factor.html'>factor</a></span>(<span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"b"</span>, <span class='st'>"a"</span>, <span class='st'>"b"</span>))),
  <span class='kw'>i</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/Sys.time.html'>Sys.Date</a></span>(),
  <span class='kw'>j</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span>(<span class='fl'>1</span>:<span class='fl'>5</span>, <span class='kw'>y</span> <span class='kw'>=</span> <span class='st'>"another item"</span>)),
  <span class='kw'>comment</span> <span class='kw'>=</span> <span class='st'>"My comment"</span>,
  <span class='kw'>anAttrib</span> <span class='kw'>=</span> <span class='fl'>1</span>:<span class='fl'>10</span>,
  <span class='kw'>anotherAttrib</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span>(<span class='fl'>TRUE</span>, <span class='kw'>y</span> <span class='kw'>=</span> <span class='fl'>1</span>:<span class='fl'>4</span>))

<span class='co'># Convert to simplest RJSON, without attributes</span>
<span class='no'>rjson1</span> <span class='kw'>&lt;-</span> <span class='fu'>to_rjson</span>(<span class='no'>obj</span>)
<span class='no'>rjson1</span></div><div class='output co'>#&gt;  [1] list("a" := c(1., 2., 3., 4., 5., 6.), "" := c("A",                   
#&gt;  [2] "B", "C", "D", "E", "F", "G", "H", "I", "J", "K", "L", "M", "N",      
#&gt;  [3] "O", "P", "Q", "R", "S", "T", "U", "V", "W", "X", "Y", "Z"),          
#&gt;  [4]     "c" := c(c1 = 4.5, c2 = 7.8, c3 = Inf, c4 = -Inf,                 
#&gt;  [5]     NA, c6 = NaN), "" := c(TRUE, FALSE, NA), "e" := c("a",            
#&gt;  [6]     "b", "a"), "f" := "this is a \\"string\\" with quote",            
#&gt;  [7]     "g" := c(-0.558015129418299, 1.05253853690161, 0.677683644301391, 
#&gt;  [8]     0.0384995470644212), "h&amp;$@" := list("x" := seq(1, 3),             
#&gt;  [9]         "y" := c(-0.356381187004009, 0.782844101839823,               
#&gt; [10]         0.804411616129238), "fact" := c("b", "a", "b"                 
#&gt; [11]         )), "i" := "2020-04-14", "j" := list(                         
#&gt; [12]         "" := seq(1, 5), "y" := "another item"))                      </div><div class='input'><span class='fu'>eval_rjson</span>(<span class='no'>rjson1</span>)</div><div class='output co'>#&gt; $a
#&gt; [1] 1 2 3 4 5 6
#&gt; 
#&gt; [[2]]
#&gt;  [1] "A" "B" "C" "D" "E" "F" "G" "H" "I" "J" "K" "L" "M" "N" "O" "P" "Q" "R" "S"
#&gt; [20] "T" "U" "V" "W" "X" "Y" "Z"
#&gt; 
#&gt; $c
#&gt;   c1   c2   c3   c4        c6 
#&gt;  4.5  7.8  Inf -Inf   NA  NaN 
#&gt; 
#&gt; [[4]]
#&gt; [1]  TRUE FALSE    NA
#&gt; 
#&gt; $e
#&gt; [1] "a" "b" "a"
#&gt; 
#&gt; $f
#&gt; [1] "this is a \"string\" with quote"
#&gt; 
#&gt; $g
#&gt; [1] -0.55801513  1.05253854  0.67768364  0.03849955
#&gt; 
#&gt; $`h&amp;$@`
#&gt; $`h&amp;$@`$x
#&gt; [1] 1 2 3
#&gt; 
#&gt; $`h&amp;$@`$y
#&gt; [1] -0.3563812  0.7828441  0.8044116
#&gt; 
#&gt; $`h&amp;$@`$fact
#&gt; [1] "b" "a" "b"
#&gt; 
#&gt; 
#&gt; $i
#&gt; [1] "2020-04-14"
#&gt; 
#&gt; $j
#&gt; $j[[1]]
#&gt; [1] 1 2 3 4 5
#&gt; 
#&gt; $j$y
#&gt; [1] "another item"
#&gt; 
#&gt; </div><div class='input'>
<span class='co'># More complex RJSON, with attributes</span>
<span class='no'>rjson2</span> <span class='kw'>&lt;-</span> <span class='fu'>to_rjson</span>(<span class='no'>obj</span>, <span class='fl'>TRUE</span>)
<span class='no'>rjson2</span></div><div class='output co'>#&gt;  [1] list("Data_" := list("a" := c(1., 2., 3., 4., 5., 6.), "" := c("A",                                                                    
#&gt;  [2] "B", "C", "D", "E", "F", "G", "H", "I", "J", "K", "L", "M", "N",                                                                       
#&gt;  [3] "O", "P", "Q", "R", "S", "T", "U", "V", "W", "X", "Y", "Z"),                                                                           
#&gt;  [4]     "c" := c(c1 = 4.5, c2 = 7.8, c3 = Inf, c4 = -Inf,                                                                                  
#&gt;  [5]     NA, c6 = NaN), "" := c(TRUE, FALSE, NA), "e" := list("Data_" := c(1,                                                               
#&gt;  [6]     2, 1), "levels" := c("a", "b"), "class" := "factor"),                                                                              
#&gt;  [7]     "f" := "this is a \\"string\\" with quote", "g" := list("Data_" := c(-0.558015129418299,                                           
#&gt;  [8]     1.05253853690161, 0.677683644301391, 0.0384995470644212), "dim" := c(2,                                                            
#&gt;  [9]     2)), "h&amp;$@" := list("Data_" := list("x" := seq(1, 3),                                                                              
#&gt; [10]         "y" := c(-0.356381187004009, 0.782844101839823,                                                                                
#&gt; [11]         0.804411616129238), "fact" := list("Data_" := c(2,                                                                             
#&gt; [12]         1, 2), "levels" := c("a", "b"), "class" := "factor")), "row.names" := seq(1, 3), "class" := "data.frame"),                     
#&gt; [13]     "i" := list("Data_" := 18366., "class" := "Date"),                                                                                 
#&gt; [14]     "j" := list("" := seq(1, 5), "y" := "another item")), "comment" := "My comment", "anAttrib" := seq(1, 10), "anotherAttrib" := list(
#&gt; [15]     "" := TRUE, "y" := seq(1, 4)))                                                                                                     </div><div class='input'><span class='no'>obj2</span> <span class='kw'>&lt;-</span> <span class='fu'>eval_rjson</span>(<span class='no'>rjson2</span>)
<span class='no'>obj2</span></div><div class='output co'>#&gt; $a
#&gt; [1] 1 2 3 4 5 6
#&gt; 
#&gt; [[2]]
#&gt;  [1] "A" "B" "C" "D" "E" "F" "G" "H" "I" "J" "K" "L" "M" "N" "O" "P" "Q" "R" "S"
#&gt; [20] "T" "U" "V" "W" "X" "Y" "Z"
#&gt; 
#&gt; $c
#&gt;   c1   c2   c3   c4        c6 
#&gt;  4.5  7.8  Inf -Inf   NA  NaN 
#&gt; 
#&gt; [[4]]
#&gt; [1]  TRUE FALSE    NA
#&gt; 
#&gt; $e
#&gt; [1] a b a
#&gt; Levels: a b
#&gt; 
#&gt; $f
#&gt; [1] "this is a \"string\" with quote"
#&gt; 
#&gt; $g
#&gt;            [,1]       [,2]
#&gt; [1,] -0.5580151 0.67768364
#&gt; [2,]  1.0525385 0.03849955
#&gt; 
#&gt; $`h&amp;$@`
#&gt;   x          y fact
#&gt; 1 1 -0.3563812    b
#&gt; 2 2  0.7828441    a
#&gt; 3 3  0.8044116    b
#&gt; 
#&gt; $i
#&gt; [1] "2020-04-14"
#&gt; 
#&gt; $j
#&gt; $j[[1]]
#&gt; [1] 1 2 3 4 5
#&gt; 
#&gt; $j$y
#&gt; [1] "another item"
#&gt; 
#&gt; 
#&gt; attr(,"anAttrib")
#&gt;  [1]  1  2  3  4  5  6  7  8  9 10
#&gt; attr(,"anotherAttrib")
#&gt; attr(,"anotherAttrib")[[1]]
#&gt; [1] TRUE
#&gt; 
#&gt; attr(,"anotherAttrib")$y
#&gt; [1] 1 2 3 4
#&gt; </div><div class='input'><span class='co'># Numbers near equivalence comparison (note: identical(Robj, Robj2) is FALSE)</span>
<span class='fu'><a href='https://rdrr.io/r/base/all.equal.html'>all.equal</a></span>(<span class='no'>obj</span>, <span class='no'>obj2</span>)</div><div class='output co'>#&gt; [1] TRUE</div><div class='input'>
<span class='fu'><a href='https://rdrr.io/r/base/rm.html'>rm</a></span>(<span class='no'>obj</span>, <span class='no'>obj2</span>, <span class='no'>rjson1</span>, <span class='no'>rjson2</span>)</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by <a href='https://phgrosjean.sciviews.org/'>Philippe Grosjean</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.9000.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


