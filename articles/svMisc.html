<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>svMisc - Miscellaneous Functions • svMisc</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/spacelab/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="svMisc - Miscellaneous Functions">
<meta property="og:description" content="svMisc">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">svMisc</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.1.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/svMisc.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/temporary_environment.html">Temporary environment</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/SciViews/svMisc/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>svMisc - Miscellaneous Functions</h1>
                        <h4 class="author">Philippe Grosjean (<a href="mailto:phgrosjean@sciviews.org" class="email">phgrosjean@sciviews.org</a>)</h4>
            
            <h4 class="date">2020-04-14</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/SciViews/svMisc/blob/master/vignettes/svMisc.Rmd"><code>vignettes/svMisc.Rmd</code></a></small>
      <div class="hidden name"><code>svMisc.Rmd</code></div>

    </div>

    
    
<p>The ‘svMisc’ package contains a large collection of functions that are useful in the context of (G)UI (Graphical) User Interface development, and also, of more general usage. Here is a series of functions you should look at.</p>
<div id="help" class="section level2">
<h2 class="hasAnchor">
<a href="#help" class="anchor"></a>Help</h2>
<p>In R, you access man pages for the various R objects with <code>help(topic)</code>, or <code>?topic</code>. But, if <code>topic</code> is not found, these function do not return a very useful information. For instance, if you want to make a <a href="https://www.jstatsoft.org/article/view/v039i02">Kalman filtering</a> in R, you may be enclined to search for the topic <code>kalman</code></p>
<div class="sourceCode" id="cb1"><html><body><pre class="r">?<span class="no">kalman</span>
<span class="co">#&gt; No documentation for 'kalman' in specified packages and libraries:</span>
<span class="co">#&gt; you could try '??kalman'</span></pre></body></html></div>
<p>OK, it is suggested to use <code>??</code> to search the documentation for <code>kalman</code>. However, using <code><a href="../reference/about.html">about()</a></code> instead immediatelly produces a more useful result:</p>
<div class="sourceCode" id="cb2"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">svMisc</span>)
<span class="co">#&gt; </span>
<span class="co">#&gt; Attaching package: 'svMisc'</span>
<span class="co">#&gt; The following object is masked from 'package:utils':</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     ?</span>
<span class="fu"><a href="../reference/about.html">about</a></span>(<span class="st">"kalman"</span>)
<span class="co">#&gt; 'kalman' not found, do you mean?</span>
<span class="co">#&gt; stats::KalmanForecast, stats::KalmanLike, stats::KalmanRun, stats::KalmanSmooth</span>
<span class="co">#&gt; Searching keyword in all R help pages for ''...</span></pre></body></html></div>
<p>… and it also provides a list of potential man pages that could interest you. In case the topic is found, <code><a href="../reference/about.html">about()</a></code> does the same as <code>help()</code> and shows the page (try with <code><a href="../reference/about.html">about("log")</a></code>, for instance). If you still have not found what you are looking for, you could try to search on the Web by using <code><a href="../reference/search_web.html">search_web()</a></code>.</p>
<p>You may also be interested by <code><a href="../reference/is_help.html">is_help()</a></code> that indicates if an object is associated with a man page, and if it has a running example.</p>
</div>
<div id="packages" class="section level2">
<h2 class="hasAnchor">
<a href="#packages" class="anchor"></a>Packages</h2>
<p>In R, the use of <code>library()</code> to load a <strong>package</strong> is very confusing. Given the number of questions raised about it, one could consider another function to load R packages in memory. <code>svMisc</code> proposes <code><a href="../reference/package.html">package()</a></code>. That fuction loads one or several R packages as silently as possible and it returns <code>TRUE</code> only if <strong>all</strong> the packages are loaded. Otherwise, the list of missing packages is recorded<a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a>, and one could simply issue <code><a href="../reference/install.html">Install()</a></code> to install them. This is indeed a semi-automatic installation mechanisms for R packages. The UseR still masters the process, but it is more straightforward.</p>
</div>
<div id="analyses-in-batch-and-show-progression" class="section level2">
<h2 class="hasAnchor">
<a href="#analyses-in-batch-and-show-progression" class="anchor"></a>Analyses in batch and show progression</h2>
<p>If you need to perform an analysis in batch mode, you may be happy with <code><a href="../reference/batch.html">batch()</a></code> and <code><a href="../reference/progress.html">progress()</a></code>. The first function runs a function sequentially on all items <strong>allowing for an informative message in case of fealure</strong>. Also, <code><a href="../reference/batch.html">batch()</a></code> provides a mechanism to recover from the error, so that followin items in the list are also analyzed. Indeed, if you use a simple <code>for()</code> loop or <code>applyXXX()</code> functions, the execution is stopped at the first error encountered. Imagine 500 items to process, and an error that appears at the second one… it leaves you 498 items unanalyzed! allows to continue to the next item.</p>
<p>The example shows a fake batch process of files, which fails randomly. Here is the function to run sequentially:</p>
<div class="sourceCode" id="cb3"><html><body><pre class="r"><span class="no">fake_process</span> <span class="kw">&lt;-</span> <span class="kw">function</span>(<span class="no">file</span>) {
  <span class="fu"><a href="https://rdrr.io/r/base/message.html">message</a></span>(<span class="st">"Processing "</span>, <span class="no">file</span>, <span class="st">"..."</span>)
  <span class="fu"><a href="https://rdrr.io/r/utils/flush.console.html">flush.console</a></span>()
  <span class="fu"><a href="https://rdrr.io/r/base/Sys.sleep.html">Sys.sleep</a></span>(<span class="fl">0.5</span>)
  <span class="kw">if</span> (<span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html">runif</a></span>(<span class="fl">1</span>) <span class="kw">&gt;</span> <span class="fl">0.7</span>) {<span class="co"># Fail</span>
    <span class="fu"><a href="https://rdrr.io/r/base/warning.html">warning</a></span>(<span class="st">"fake_process was unable to process "</span>, <span class="no">file</span>)
    <span class="fu"><a href="https://rdrr.io/r/base/invisible.html">invisible</a></span>(<span class="fl">FALSE</span>)
  } <span class="kw">else</span> <span class="fu"><a href="https://rdrr.io/r/base/invisible.html">invisible</a></span>(<span class="fl">TRUE</span>)
}</pre></body></html></div>
<p>The key aspect here is that you function, instead of using <code><a href="https://rdrr.io/r/base/stop.html">stop()</a></code> must use <code><a href="https://rdrr.io/r/base/warning.html">warning()</a></code> and return <code>FALSE</code>. Otherwise, in cas of success, it should return <code>TRUE</code>. Then, calling your function on a series of objects is straightforward:</p>
<div class="sourceCode" id="cb4"><html><body><pre class="r"><span class="co"># Run it in batch mode on ten items</span>
<span class="fu"><a href="../reference/batch.html">batch</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span>(<span class="st">"file"</span>, <span class="fl">1</span>:<span class="fl">10</span>), <span class="no">fake_process</span>)
<span class="co">#&gt; Running the batch process with fake_process...</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Progress:  1 on 10  Progress:  2 on 10  Progress:  3 on 10  Progress:  4 on 10  Progress:  5 on 10  Progress:  6 on 10  Progress:  7 on 10  Progress:  8 on 10</span>
<span class="co">#&gt; Warning in fun(item, ...): fake_process was unable to process file8</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Progress:  9 on 10  Progress: 10 on 10                      </span>
<span class="co">#&gt; Processed successfully 9 items on 10 (see .last.batch)</span></pre></body></html></div>
<p>In case an error occurred, the information is recorded i, <code>.last.batch</code>:</p>
<div class="sourceCode" id="cb5"><html><body><pre class="r"><span class="no">.last.batch</span>
<span class="co">#&gt; [1] FALSE</span>
<span class="co">#&gt; attr(,"items")</span>
<span class="co">#&gt;  [1] "file1"  "file2"  "file3"  "file4"  "file5"  "file6"  "file7"  "file8" </span>
<span class="co">#&gt;  [9] "file9"  "file10"</span>
<span class="co">#&gt; attr(,"ok")</span>
<span class="co">#&gt;  [1]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE FALSE  TRUE  TRUE</span></pre></body></html></div>
<p>The <code>items</code> and <code>ok</code> attributes are also available from that object for further inspection and action.</p>
<p>If you run <code><a href="../reference/batch.html">batch()</a></code> in R, you noted also the <code><a href="../reference/progress.html">progress()</a></code>ion message that appeared. Indeed the <code><a href="../reference/progress.html">progress()</a></code> function allows to display such a message, either as a text at the R console, or in a dialog box. There are many different forms, see the man page <code><a href="../reference/progress.html">?progress</a></code>. for instance, here is a progress bar in percent, stopped at 75% () you need to call <code><a href="../reference/progress.html">progress()</a></code> with a value higher than <code>max.value =</code> to dismiss it):</p>
<div class="sourceCode" id="cb6"><html><body><pre class="r"><span class="kw">for</span> (<span class="no">i</span> <span class="kw">in</span> <span class="fl">0</span>:<span class="fl">75</span>) {
  <span class="fu"><a href="../reference/progress.html">progress</a></span>(<span class="no">i</span>, <span class="kw">progress.bar</span> <span class="kw">=</span> <span class="fl">TRUE</span>)
  <span class="co"># Some process here...</span>
}
<span class="co">#&gt;           0%---------25%---------50%---------75%--------100%</span>
<span class="co">#&gt; Progress: ||||||||||||||||||||||||||||||||||||||</span></pre></body></html></div>
</div>
<div id="subsettable-functions" class="section level2">
<h2 class="hasAnchor">
<a href="#subsettable-functions" class="anchor"></a>Subsettable functions</h2>
<p>The <code><a href="https://rdrr.io/r/base/Extract.html">$</a></code> operator is not applicable on functions. It is not meaningful in that context. Yet, it may be convenient to use it in certain conditions. From the example of <code><a href="../reference/subsettable.html">?subsettable</a></code>:</p>
<div class="sourceCode" id="cb7"><html><body><pre class="r"><span class="no">foo</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/structure.html">structure</a></span>(<span class="kw">function</span>(<span class="no">x</span>, <span class="no">type</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"histogram"</span>, <span class="st">"boxplot"</span>), <span class="no">...</span>) {
  <span class="no">type</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/match.arg.html">match.arg</a></span>(<span class="no">type</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"histogram"</span>, <span class="st">"boxplot"</span>))
  <span class="fu"><a href="https://rdrr.io/r/base/switch.html">switch</a></span>(<span class="no">type</span>,
    <span class="kw">histogram</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/graphics/hist.html">hist</a></span>(<span class="no">x</span>, <span class="no">...</span>),
    <span class="kw">boxplot</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/graphics/boxplot.html">boxplot</a></span>(<span class="no">x</span>, <span class="no">...</span>),
    <span class="fu"><a href="https://rdrr.io/r/base/stop.html">stop</a></span>(<span class="st">"unknow type"</span>)
  )
}, <span class="kw">class</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"function"</span>, <span class="st">"subsettable_type"</span>))
<span class="no">foo</span>
<span class="co">#&gt; function(x, type = c("histogram", "boxplot"), ...) {</span>
<span class="co">#&gt;   type &lt;- match.arg(type, c("histogram", "boxplot"))</span>
<span class="co">#&gt;   switch(type,</span>
<span class="co">#&gt;     histogram = hist(x, ...),</span>
<span class="co">#&gt;     boxplot = boxplot(x, ...),</span>
<span class="co">#&gt;     stop("unknow type")</span>
<span class="co">#&gt;   )</span>
<span class="co">#&gt; }</span>
<span class="co">#&gt; attr(,"class")</span>
<span class="co">#&gt; [1] "function"         "subsettable_type"</span>

<span class="co"># This function can be used as usual:</span>
<span class="fu">foo</span>(<span class="fu"><a href="https://rdrr.io/r/stats/Normal.html">rnorm</a></span>(<span class="fl">50</span>), <span class="kw">type</span> <span class="kw">=</span> <span class="st">"histogram"</span>)</pre></body></html></div>
<p><img src="svMisc_files/figure-html/unnamed-chunk-7-1.png" width="700"></p>
<div class="sourceCode" id="cb8"><html><body><pre class="r"><span class="co"># ... but also this way:</span>
<span class="no">foo</span>$<span class="fu">histogram</span>(<span class="fu"><a href="https://rdrr.io/r/stats/Normal.html">rnorm</a></span>(<span class="fl">50</span>))</pre></body></html></div>
<p><img src="svMisc_files/figure-html/unnamed-chunk-7-2.png" width="700"></p>
<div class="sourceCode" id="cb9"><html><body><pre class="r"><span class="no">foo</span>$<span class="fu"><a href="https://rdrr.io/r/graphics/boxplot.html">boxplot</a></span>(<span class="fu"><a href="https://rdrr.io/r/stats/Normal.html">rnorm</a></span>(<span class="fl">50</span>))</pre></body></html></div>
<p><img src="svMisc_files/figure-html/unnamed-chunk-7-3.png" width="700"></p>
</div>
<div id="capture-and-parse-r-code" class="section level2">
<h2 class="hasAnchor">
<a href="#capture-and-parse-r-code" class="anchor"></a>Capture and parse R code</h2>
<p>The <code><a href="https://rdrr.io/r/utils/capture.output.html">capture.output()</a></code> function from the ‘utils’ package can capture output usually send to the R console, but it does so in an imperfect way. If you want to capture output <em>exactly</em> as it would appear at the R console, you could use <code><a href="../reference/capture_all.html">capture_all()</a></code>:</p>
<div class="sourceCode" id="cb10"><html><body><pre class="r"><span class="no">captured</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/capture_all.html">capture_all</a></span>(<span class="fu"><a href="../reference/parse_text.html">parse_text</a></span>(<span class="st">'1:2 + 1:3'</span>), <span class="kw">split</span> <span class="kw">=</span> <span class="fl">FALSE</span>)
<span class="no">captured</span>
<span class="co">#&gt; [1] ":&gt; 1:2 + 1:3"                                                                    </span>
<span class="co">#&gt; [2] "[1] 2 4 4"                                                                       </span>
<span class="co">#&gt; [3] "Warning message:"                                                                </span>
<span class="co">#&gt; [4] "In 1:2 + 1:3 : longer object length is not a multiple of shorter object length\n"</span></pre></body></html></div>
<p>Only the prompt is changed to <code>:&gt;</code>. You can use that content, or print it somewhere, for instance:</p>
<div class="sourceCode" id="cb11"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/writeLines.html">writeLines</a></span>(<span class="no">captured</span>)
<span class="co">#&gt; :&gt; 1:2 + 1:3</span>
<span class="co">#&gt; [1] 2 4 4</span>
<span class="co">#&gt; Warning message:</span>
<span class="co">#&gt; In 1:2 + 1:3 : longer object length is not a multiple of shorter object length</span></pre></body></html></div>
<p>The <code><a href="../reference/parse_text.html">parse_text()</a></code> function parse one or more character strings exactly as if they were commands entered at the R prompt:</p>
<div class="sourceCode" id="cb12"><html><body><pre class="r"><span class="fu"><a href="../reference/parse_text.html">parse_text</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"1 + 1"</span>, <span class="st">"log(10)"</span>))
<span class="co">#&gt; expression(1 + 1, log(10))</span></pre></body></html></div>
<p>… and for an incomplete expression:</p>
<div class="sourceCode" id="cb13"><html><body><pre class="r"><span class="fu"><a href="../reference/parse_text.html">parse_text</a></span>(<span class="st">"log("</span>)
<span class="co">#&gt; [1] NA</span></pre></body></html></div>
<p>The <code><a href="../reference/source_clipboard.html">source_clipboard()</a></code> source code directly from the clipboard. All these functions form the basis to simulate an R console in a different context (a console widget in your own GUI). You can combine this with <code><a href="../reference/to_rjson.html">to_rjson()</a></code>/<code>eval_rjson</code> to encode and decode R objects on both sides of a pipeline between the R process and your GUI.</p>
</div>
<div id="encodedecode-r-objects-in-rjson" class="section level2">
<h2 class="hasAnchor">
<a href="#encodedecode-r-objects-in-rjson" class="anchor"></a>Encode/decode R objects in Rjson</h2>
<p>Rjson is a version of <a href="https://www.json.org/json-en.html">JSON</a> that allows to encore and decode rapidly almost all R objects. From the example at <code><a href="../reference/to_rjson.html">?to_rjson</a></code>:</p>
<div class="sourceCode" id="cb14"><html><body><pre class="r"><span class="co"># A complex R object</span>
<span class="co"># Note: we round doubles to 14 digits because precision is lost in the process</span>
<span class="no">obj</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/structure.html">structure</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span>(
  <span class="kw">a</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/double.html">as.double</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">1</span>:<span class="fl">5</span>, <span class="fl">6</span>)),
  <span class="no">LETTERS</span>,
  <span class="kw">c</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="kw">c1</span> <span class="kw">=</span> <span class="fl">4.5</span>, <span class="kw">c2</span> <span class="kw">=</span> <span class="fl">7.8</span>, <span class="kw">c3</span> <span class="kw">=</span> <span class="fl">Inf</span>, <span class="kw">c4</span> <span class="kw">=</span> -<span class="fl">Inf</span>, <span class="fl">NA</span>, <span class="kw">c6</span> <span class="kw">=</span> <span class="fl">NaN</span>),
  <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">TRUE</span>, <span class="fl">FALSE</span>, <span class="fl">NA</span>),
  <span class="kw">e</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"a"</span>, <span class="st">"b"</span>, <span class="st">"a"</span>)),
  <span class="kw">f</span> <span class="kw">=</span> <span class="st">'this is a "string" with quote'</span>,
  <span class="kw">g</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html">matrix</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span>(<span class="fu"><a href="https://rdrr.io/r/stats/Normal.html">rnorm</a></span>(<span class="fl">4</span>), <span class="fl">14</span>), <span class="kw">ncol</span> <span class="kw">=</span> <span class="fl">2</span>),
  <span class="kw">`h&amp;$@`</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="kw">x</span> <span class="kw">=</span> <span class="fl">1</span>:<span class="fl">3</span>, <span class="kw">y</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span>(<span class="fu"><a href="https://rdrr.io/r/stats/Normal.html">rnorm</a></span>(<span class="fl">3</span>), <span class="fl">14</span>),
    <span class="kw">fact</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"b"</span>, <span class="st">"a"</span>, <span class="st">"b"</span>))),
  <span class="kw">i</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.time.html">Sys.Date</a></span>(),
  <span class="kw">j</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="fl">1</span>:<span class="fl">5</span>, <span class="kw">y</span> <span class="kw">=</span> <span class="st">"another item"</span>)),
  <span class="kw">comment</span> <span class="kw">=</span> <span class="st">"My comment"</span>,
  <span class="kw">anAttrib</span> <span class="kw">=</span> <span class="fl">1</span>:<span class="fl">10</span>,
  <span class="kw">anotherAttrib</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="fl">TRUE</span>, <span class="kw">y</span> <span class="kw">=</span> <span class="fl">1</span>:<span class="fl">4</span>))

<span class="co"># Convert to RJSON</span>
(<span class="no">rjson1</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/to_rjson.html">to_rjson</a></span>(<span class="no">obj</span>, <span class="kw">attributes</span> <span class="kw">=</span> <span class="fl">TRUE</span>))
<span class="co">#&gt;  [1] list("Data_" := list("a" := c(1., 2., 3., 4., 5., 6.), "" := c("A",                                                                    </span>
<span class="co">#&gt;  [2] "B", "C", "D", "E", "F", "G", "H", "I", "J", "K", "L", "M", "N",                                                                       </span>
<span class="co">#&gt;  [3] "O", "P", "Q", "R", "S", "T", "U", "V", "W", "X", "Y", "Z"),                                                                           </span>
<span class="co">#&gt;  [4]     "c" := c(c1 = 4.5, c2 = 7.8, c3 = Inf, c4 = -Inf,                                                                                  </span>
<span class="co">#&gt;  [5]     NA, c6 = NaN), "" := c(TRUE, FALSE, NA), "e" := list("Data_" := c(1,                                                               </span>
<span class="co">#&gt;  [6]     2, 1), "levels" := c("a", "b"), "class" := "factor"),                                                                              </span>
<span class="co">#&gt;  [7]     "f" := "this is a \\"string\\" with quote", "g" := list("Data_" := c(0.09209603582657,                                             </span>
<span class="co">#&gt;  [8]     1.35820774574922, -0.49995491562079, -0.99549993427429), "dim" := c(2,                                                             </span>
<span class="co">#&gt;  [9]     2)), "h&amp;$@" := list("x" := seq(1, 3), "y" := c(0.51746830355466,                                                                   </span>
<span class="co">#&gt; [10]     -0.17680729823248, 0.32262361806429), "fact" := list("Data_" := c(2,                                                               </span>
<span class="co">#&gt; [11]     1, 2), "levels" := c("a", "b"), "class" := "factor")),                                                                             </span>
<span class="co">#&gt; [12]     "i" := list("Data_" := 18366., "class" := "Date"),                                                                                 </span>
<span class="co">#&gt; [13]     "j" := list("" := seq(1, 5), "y" := "another item")), "comment" := "My comment", "anAttrib" := seq(1, 10), "anotherAttrib" := list(</span>
<span class="co">#&gt; [14]     "" := TRUE, "y" := seq(1, 4)))</span>
<span class="co"># Get back an R object from Rjson</span>
(<span class="no">obj2</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/to_rjson.html">eval_rjson</a></span>(<span class="no">rjson1</span>))
<span class="co">#&gt; $a</span>
<span class="co">#&gt; [1] 1 2 3 4 5 6</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; [[2]]</span>
<span class="co">#&gt;  [1] "A" "B" "C" "D" "E" "F" "G" "H" "I" "J" "K" "L" "M" "N" "O" "P" "Q" "R" "S"</span>
<span class="co">#&gt; [20] "T" "U" "V" "W" "X" "Y" "Z"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $c</span>
<span class="co">#&gt;   c1   c2   c3   c4        c6 </span>
<span class="co">#&gt;  4.5  7.8  Inf -Inf   NA  NaN </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; [[4]]</span>
<span class="co">#&gt; [1]  TRUE FALSE    NA</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $e</span>
<span class="co">#&gt; [1] a b a</span>
<span class="co">#&gt; Levels: a b</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $f</span>
<span class="co">#&gt; [1] "this is a \"string\" with quote"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $g</span>
<span class="co">#&gt;            [,1]       [,2]</span>
<span class="co">#&gt; [1,] 0.09209604 -0.4999549</span>
<span class="co">#&gt; [2,] 1.35820775 -0.9954999</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $`h&amp;$@`</span>
<span class="co">#&gt; $`h&amp;$@`$x</span>
<span class="co">#&gt; [1] 1 2 3</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $`h&amp;$@`$y</span>
<span class="co">#&gt; [1]  0.5174683 -0.1768073  0.3226236</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $`h&amp;$@`$fact</span>
<span class="co">#&gt; [1] b a b</span>
<span class="co">#&gt; Levels: a b</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $i</span>
<span class="co">#&gt; [1] "2020-04-14"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $j</span>
<span class="co">#&gt; $j[[1]]</span>
<span class="co">#&gt; [1] 1 2 3 4 5</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $j$y</span>
<span class="co">#&gt; [1] "another item"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; attr(,"anAttrib")</span>
<span class="co">#&gt;  [1]  1  2  3  4  5  6  7  8  9 10</span>
<span class="co">#&gt; attr(,"anotherAttrib")</span>
<span class="co">#&gt; attr(,"anotherAttrib")[[1]]</span>
<span class="co">#&gt; [1] TRUE</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; attr(,"anotherAttrib")$y</span>
<span class="co">#&gt; [1] 1 2 3 4</span>
<span class="co"># Is it identical to obj?</span>
<span class="fu"><a href="https://rdrr.io/r/base/identical.html">identical</a></span>(<span class="no">obj</span>, <span class="no">obj2</span>)
<span class="co">#&gt; [1] TRUE</span></pre></body></html></div>
</div>
<div id="get-system-file-or-directory" class="section level2">
<h2 class="hasAnchor">
<a href="#get-system-file-or-directory" class="anchor"></a>Get system file or directory</h2>
<p>There are several different functions in R to access system files, or files inside R packages: <code><a href="https://rdrr.io/r/base/Rhome.html">R.home()</a></code>, <code><a href="https://rdrr.io/r/base/system.file.html">system.file()</a></code>, <code><a href="https://rdrr.io/r/base/Sys.which.html">Sys.which()</a></code>, <code><a href="https://rdrr.io/r/base/tempfile.html">tempdir()</a></code>. The <code><a href="../reference/system_file.html">system_dir()</a></code> and <code><a href="../reference/system_file.html">system_file()</a></code> functions centralize their functionnalities. For instance:</p>
<ul>
<li>Get the temporary directory used by this R process</li>
</ul>
<div class="sourceCode" id="cb15"><html><body><pre class="r"><span class="fu"><a href="../reference/system_file.html">system_dir</a></span>(<span class="st">"temp"</span>)
<span class="co">#&gt; [1] "/var/folders/24/8k48jl6d249_n_qfxwsl6xvm0000gn/T//RtmpECHhvN"</span></pre></body></html></div>
<ul>
<li>Get the system temporary directory</li>
</ul>
<div class="sourceCode" id="cb16"><html><body><pre class="r"><span class="fu"><a href="../reference/system_file.html">system_dir</a></span>(<span class="st">"sysTemp"</span>)
<span class="co">#&gt; [1] "/tmp"</span></pre></body></html></div>
<ul>
<li>Get the home directory of the current user</li>
</ul>
<div class="sourceCode" id="cb17"><html><body><pre class="r"><span class="fu"><a href="../reference/system_file.html">system_dir</a></span>(<span class="st">"user"</span>)
<span class="co">#&gt; [1] "/Users/runner"</span></pre></body></html></div>
<ul>
<li>Get the R home directory</li>
</ul>
<div class="sourceCode" id="cb18"><html><body><pre class="r"><span class="fu"><a href="../reference/system_file.html">system_dir</a></span>(<span class="st">"home"</span>)
<span class="co">#&gt; [1] "/Library/Frameworks/R.framework/Resources"</span></pre></body></html></div>
<ul>
<li>Get the path to an executable</li>
</ul>
<div class="sourceCode" id="cb19"><html><body><pre class="r"><span class="fu"><a href="../reference/system_file.html">system_dir</a></span>(<span class="st">"zip"</span>, <span class="kw">exec</span> <span class="kw">=</span> <span class="fl">TRUE</span>)
<span class="co">#&gt; [1] "/usr/bin"</span></pre></body></html></div>
<ul>
<li>Get the file of that executable</li>
</ul>
<div class="sourceCode" id="cb20"><html><body><pre class="r"><span class="fu"><a href="../reference/system_file.html">system_file</a></span>(<span class="st">"zip"</span>, <span class="kw">exec</span> <span class="kw">=</span> <span class="fl">TRUE</span>)
<span class="co">#&gt; [1] "/usr/bin/zip"</span></pre></body></html></div>
<ul>
<li>Get the root directory of a package</li>
</ul>
<div class="sourceCode" id="cb21"><html><body><pre class="r"><span class="fu"><a href="../reference/system_file.html">system_dir</a></span>(<span class="kw">package</span> <span class="kw">=</span> <span class="st">"stats"</span>)
<span class="co">#&gt; [1] "/Library/Frameworks/R.framework/Resources/library/stats"</span></pre></body></html></div>
<ul>
<li>Get a file from a package</li>
</ul>
<div class="sourceCode" id="cb22"><html><body><pre class="r"><span class="fu"><a href="../reference/system_file.html">system_file</a></span>(<span class="st">"help"</span>, <span class="st">"AnIndex"</span>, <span class="kw">package</span> <span class="kw">=</span> <span class="st">"splines"</span>)
<span class="co">#&gt; [1] "/Library/Frameworks/R.framework/Resources/library/splines/help/AnIndex"</span></pre></body></html></div>
<p>There are other possibilities. See <code><a href="../reference/system_file.html">?system_dir</a></code>. You may also be interested by <code><a href="../reference/file_edit.html">file_edit()</a></code> that allows to create and edit a text file from a template.</p>
</div>
<div id="various-information-functions" class="section level2">
<h2 class="hasAnchor">
<a href="#various-information-functions" class="anchor"></a>Various information functions</h2>
<ul>
<li>
<code><a href="../reference/compare_r_version.html">compare_r_version()</a></code> conveniently compares the current R version with a specified one. It returns 1 if it is newer, 0, if it is equal and -1 if it is older.</li>
</ul>
<div class="sourceCode" id="cb23"><html><body><pre class="r"><span class="fu"><a href="../reference/compare_r_version.html">compare_r_version</a></span>(<span class="st">"5.6.0"</span>) <span class="co"># Probably older</span>
<span class="co">#&gt; [1] -1</span></pre></body></html></div>
<div class="sourceCode" id="cb24"><html><body><pre class="r"><span class="fu"><a href="../reference/compare_r_version.html">compare_r_version</a></span>(<span class="st">"0.6.0"</span>) <span class="co"># Probably newer</span>
<span class="co">#&gt; [1] 1</span></pre></body></html></div>
<ul>
<li>Check the environment:</li>
</ul>
<div class="sourceCode" id="cb25"><html><body><pre class="r"><span class="fu"><a href="../reference/is_help.html">is_win</a></span>() <span class="co"># Windows?</span>
<span class="co">#&gt; [1] FALSE</span>
<span class="fu"><a href="../reference/is_help.html">is_mac</a></span>() <span class="co"># MacOS?</span>
<span class="co">#&gt; [1] TRUE</span>
<span class="fu"><a href="../reference/is_help.html">is_rgui</a></span>() <span class="co"># Is it RGui under Windows?</span>
<span class="co">#&gt; [1] FALSE</span>
<span class="fu"><a href="../reference/is_help.html">is_sdi</a></span>() <span class="co"># Is RGui run in SDI mode (separate windows)?</span>
<span class="co">#&gt; [1] FALSE</span>
<span class="fu"><a href="../reference/is_help.html">is_rstudio</a></span>() <span class="co"># Is it RStudio?</span>
<span class="co">#&gt; [1] FALSE</span>
<span class="fu"><a href="../reference/is_help.html">is_rstudio_desktop</a></span>() <span class="co"># RStudio desktop?</span>
<span class="co">#&gt; [1] FALSE</span>
<span class="fu"><a href="../reference/is_help.html">is_rstudio_server</a></span>() <span class="co"># RStudio server?</span>
<span class="co">#&gt; [1] FALSE</span>
<span class="fu"><a href="../reference/is_help.html">is_jgr</a></span>() <span class="co"># Is R running under JGR?</span>
<span class="co">#&gt; [1] FALSE</span></pre></body></html></div>
</div>
<div id="miscellaneous" class="section level2">
<h2 class="hasAnchor">
<a href="#miscellaneous" class="anchor"></a>Miscellaneous</h2>
<ul>
<li>Make sure a vector is of a defined mode and length (possibly by applying recycling rule) using <code><a href="../reference/def.html">def()</a></code>:</li>
</ul>
<div class="sourceCode" id="cb26"><html><body><pre class="r"><span class="fu"><a href="../reference/def.html">def</a></span>(<span class="fl">0</span>:<span class="fl">2</span>, <span class="kw">mode</span> <span class="kw">=</span> <span class="st">"logical"</span>, <span class="kw">length.out</span> <span class="kw">=</span> <span class="fl">5</span>) <span class="co"># logical, size 5</span>
<span class="co">#&gt; [1] FALSE  TRUE  TRUE FALSE  TRUE</span></pre></body></html></div>
<ul>
<li>Get a nicely formatted <code><a href="https://rdrr.io/r/base/args.html">args()</a></code> (see <code>?arg_tips</code> for other functions to get short textuyal information about functions):</li>
</ul>
<div class="sourceCode" id="cb27"><html><body><pre class="r"><span class="fu"><a href="../reference/describe_function.html">args_tip</a></span>(<span class="st">"ls"</span>)
<span class="co">#&gt; [1] "ls(name, pos = -1L, envir = as.environment(pos), all.names = FALSE, pattern,\n    sorted = TRUE)"</span></pre></body></html></div>
<ul>
<li>Get the name of an (unused) temporary variable:</li>
</ul>
<div class="sourceCode" id="cb28"><html><body><pre class="r"><span class="fu"><a href="../reference/temp_var.html">temp_var</a></span>(<span class="st">"my_var"</span>)
<span class="co">#&gt; [1] "my_var15505"</span></pre></body></html></div>
<ul>
<li>Manage a temporary environment attached to the search path using <code><a href="../reference/temp_env.html">TempEnv()</a></code> and the <code>temp_XXX()</code> functions. The <strong>temporary_environment</strong> vignette gives more details on this series of functions.</li>
</ul>
<div class="sourceCode" id="cb29"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/search.html">search</a></span>()
<span class="co">#&gt;  [1] ".GlobalEnv"        "package:svMisc"    "package:stats"    </span>
<span class="co">#&gt;  [4] "package:graphics"  "package:grDevices" "package:utils"    </span>
<span class="co">#&gt;  [7] "package:datasets"  "package:methods"   "Autoloads"        </span>
<span class="co">#&gt; [10] "SciViews:TempEnv"  "tools:callr"       "package:base"</span>
<span class="co"># Assign a variable in a temporary environment</span>
<span class="fu"><a href="../reference/temp_env.html">assign_temp</a></span>(<span class="st">"my_var"</span>, <span class="fl">1</span>:<span class="fl">5</span>)
<span class="co"># The environment is named SciViews:TempEnv</span>
<span class="fu"><a href="https://rdrr.io/r/base/search.html">search</a></span>()
<span class="co">#&gt;  [1] ".GlobalEnv"        "package:svMisc"    "package:stats"    </span>
<span class="co">#&gt;  [4] "package:graphics"  "package:grDevices" "package:utils"    </span>
<span class="co">#&gt;  [7] "package:datasets"  "package:methods"   "Autoloads"        </span>
<span class="co">#&gt; [10] "SciViews:TempEnv"  "tools:callr"       "package:base"</span>
<span class="co"># Get the variable</span>
<span class="fu"><a href="../reference/temp_env.html">get_temp</a></span>(<span class="st">"my_var"</span>)
<span class="co">#&gt; [1] 1 2 3 4 5</span>
<span class="co"># List variables in the temporary environment</span>
<span class="fu"><a href="https://rdrr.io/r/base/ls.html">ls</a></span>(<span class="kw">envir</span> <span class="kw">=</span> <span class="fu"><a href="../reference/temp_env.html">TempEnv</a></span>())
<span class="co">#&gt; [1] "my_var"</span>
<span class="co"># Delete the variable</span>
<span class="fu"><a href="../reference/temp_env.html">rm_temp</a></span>(<span class="st">"my_var"</span>)</pre></body></html></div>
</div>
<div class="footnotes">
<hr>
<ol>
<li id="fn1"><p>The list of missing packages is written in a variable named <code>.packages_to_install</code> located in the <code>SciViews:TempEnv</code> environnement<a href="#fnref1" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by <a href="https://phgrosjean.sciviews.org/">Philippe Grosjean</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.9000.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
